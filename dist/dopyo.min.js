!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var r in e)("object"==typeof exports?exports:t)[r]=e[r]}}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=1)}([function(t,n,e){},function(t,n,e){"use strict";e.r(n);e(0);var r={pipe:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return n.reduce(function(t,n){return n(t)},t)}},selectEl:function(t){return document.querySelector(t)},createEl:function(t){return document.createElement(t)},createElNS:function(t,n){return document.createElementNS(n,t)},addEventToEl:function(t,n,e,r){t.addEventListener(n,function(t){e.call(r,t)})},findKey:function(t,n){for(var e in t)if(t[e]===n)return e}},a={DEFAULT_PADDING:40,DEFAULT_PADDING_MULTIPLE_TIMES:2,DEFAULT_PADDING_DIVISION_TIMES:2,DEFAULT_DIGIT:10,AXIS_LABEL_LINE_SIZE:5,Y_AXIS_UNIT:6,X_AXIS_LABEL_PADDING_MULTIPLE_TIMES:1.5,Y_AXIS_LABEL_PADDING_MULTIPLE_TIMES:1.6,CHART_TYPES:{LINE_CHART:"line",BAR_CHART:"bar",PIE_CHART:"pie",AREA_CHART:"area"},TOOLTIP_PADDINT_TOP:-20,TOOLTIP_PADDINT_LEFT:20,TOOLTIP_HIDE_LEFT_POSITION:-1e4};function i(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o={getArrayMax:function(t){return Math.max.apply(Math,i(t))},getArraysMax:function(t){var n=this;return Math.max.apply(Math,i(t.map(function(t){return n.getArrayMax(t)})))},getArrayMin:function(t){return Math.min.apply(Math,i(t))},getArraysMin:function(t){var n=this;return Math.min.apply(Math,i(t.map(function(t){return n.getArrayMin(t)})))},getDataSet:function(t){return t.map(function(t){return t.data})},getNegativeMinNum:function(t,n){return Math.floor(t/n)*n},getXAxisWidth:function(t,n){return t-n*a.DEFAULT_PADDING_MULTIPLE_TIMES},getYAxisHeight:function(t,n){return t-n*a.DEFAULT_PADDING_MULTIPLE_TIMES},calculateXAxisGap:function(t,n){return Math.floor(t/(n-1))},calculateYAxis:function(t,n,e,r){var a=this.calculateYAxisGap(t,n,e,r);n<0&&(n=this.getNegativeMinNum(n,a));for(var i=[],o=0;o<e;o++)i.push(n+o*a);return i},calculateYAxisGap:function(t,n,e,r){var a,i=Math.ceil(t-n);if(i<=25)a=5;else if(i<=50)a=10;else if(i<=100)a=20;else if(i<=150)a=30;else if(i<=200)a=40;else{a=50*Math.ceil(i/50/5)}return a}};function c(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(n){var e=n.padding,i=(n.type,n.size),o=n.containerEl,c=n.data,s=n.options;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.padding=s.hasOwnProperty(e)?e:a.DEFAULT_PADDING,this.size=i,this.containerEl=r.selectEl(o),this.data=c,this.options=s,this.svgEl=this.appendSvgEl(i),this.tooltipEl=s.tooltip.show?this.appendTooltipEl():"",this.unit=a.Y_AXIS_UNIT,this.digit=a.DEFAULT_DIGIT,this.colors=["#60c5ba","#47b8e0","#205e74"]}var n,e,i;return n=t,(e=[{key:"appendSvgEl",value:function(t){var n=t.width,e=t.height,a=r.createElNS("svg","http://www.w3.org/2000/svg");return a.setAttribute("width",n),a.setAttribute("height",e),a.setAttribute("viewBox","0 0 ".concat(n," ").concat(e)),a}},{key:"appendTooltipEl",value:function(){var t=r.createEl("div");return t.setAttribute("class","tooltip"),t}},{key:"drawXAxis",value:function(t){var n=c(t,2),e=n[0],r=n[1],i=r.width,o=r.height,s={x:i-e*a.DEFAULT_PADDING_MULTIPLE_TIMES,y:o-e/a.DEFAULT_PADDING_DIVISION_TIMES},u={left:{x:e,y:o-e*a.DEFAULT_PADDING_MULTIPLE_TIMES},right:{x:i-e,y:o-e*a.DEFAULT_PADDING_MULTIPLE_TIMES}},l=this.options.xAxis.show?'<text x="'.concat(s.x,'" y="').concat(s.y,'">').concat(this.options.xAxis.title,"</text>"):"";this.svgEl.innerHTML+='\n      <g class="axis x-axis">\n        '.concat(l,'\n        <line x1="').concat(u.left.x,'" x2="').concat(u.right.x,'" y1="').concat(u.left.y,'" y2="').concat(u.right.y,'" />\n      </g>\n    ')}},{key:"drawXAxisLabels",value:function(t){var n=c(t,3),e=n[0],r=n[1],i=n[2],s=o.getXAxisWidth(r.width,e),u=o.calculateXAxisGap(s,i.length),l=i.map(function(t,n){return'\n        <text x="'.concat(e+u*n,'" y="').concat(r.height-e*a.X_AXIS_LABEL_PADDING_MULTIPLE_TIMES,'">').concat(t,'</text>\n        <line x1="').concat(e+u*n,'" x2="').concat(e+u*n,'" y1="').concat(r.height-e*a.DEFAULT_PADDING_MULTIPLE_TIMES,'" y2="').concat(r.height-e*a.DEFAULT_PADDING_MULTIPLE_TIMES+a.AXIS_LABEL_LINE_SIZE,'" />\n      ')}).join("");this.svgEl.innerHTML+='<g class="labels x-axis-labels">'.concat(l,"</g>")}},{key:"drawYAxis",value:function(t){var n=c(t,2),e=n[0],r=n[1],i=(r.width,r.height),o={x:0,y:e/a.DEFAULT_PADDING_DIVISION_TIMES},s={left:{x:e,y:i-e*a.DEFAULT_PADDING_MULTIPLE_TIMES},right:{x:e,y:e}},u=this.options.yAxis.show?'<text x="'.concat(o.x,'" y="').concat(o.y,'">').concat(this.options.yAxis.title,"</text>"):"";this.svgEl.innerHTML+='\n      <g class="axis y-axis">\n        '.concat(u,'\n        <line x1="').concat(s.left.x,'" x2="').concat(s.right.x,'" y1="').concat(s.left.y,'" y2="').concat(s.right.y,'" />\n      </g>\n    ')}},{key:"drawYAxisLabels",value:function(t){var n=c(t,5),e=n[0],r=n[1],i=n[2],s=n[3],u=n[4],l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=o.getArraysMax(o.getDataSet(i)),h=o.getArraysMin(o.getDataSet(i))<0?o.getArraysMin(o.getDataSet(i)):0,d=o.getYAxisHeight(r.height,e),p=o.calculateYAxis(f,h,s,u),y=p.map(function(t,n){return'\n        <text x="'.concat(e/a.DEFAULT_PADDING_DIVISION_TIMES*a.Y_AXIS_LABEL_PADDING_MULTIPLE_TIMES,'" y="').concat(d-d/s*n,'">').concat(t,'</text>\n        <line x1="').concat(e-a.AXIS_LABEL_LINE_SIZE,'" x2="').concat(e,'" y1="').concat(d-Math.round(d/s*n),'" y2="').concat(d-Math.round(d/s*n),'" />\n      ')}).join("");this.svgEl.innerHTML+='<g class="labels y-axis-labels">'.concat(y,"</g>"),l&&this.drawYAxisGrid({padding:e,size:r,yAxisData:p,unit:s})}},{key:"drawYAxisGrid",value:function(t){var n=t.padding,e=t.size,r=t.yAxisData,a=t.unit,i=o.getYAxisHeight(e.height,n),c=r.map(function(t,r){return'<line x1="'.concat(n,'" x2="').concat(e.width-n,'" y1="').concat(i-Math.round(i/a*r),'" y2="').concat(i-Math.round(i/a*r),'" />')}).join("");this.svgEl.innerHTML+='<g class="grid y-axis-grid">'.concat(c,"</g>")}},{key:"addTooltipEvent",value:function(t){if("circle"!==t.target.nodeName.toLowerCase())this.tooltipEl.style.left="".concat(a.TOOLTIP_HIDE_LEFT_POSITION,"px");else{var n=t.target.dataset;this.tooltipEl.innerHTML='\n        <h2 class="tooltip__title">'.concat(n.date,'</h2>\n        <p class="tooltip__desc">\n          <span class="tooltip__line" style="background: ').concat(n.color,'"></span>\n          ').concat(n.value,"\n        </p>\n      "),this.tooltipEl.style.left="".concat(t.clientX+a.TOOLTIP_PADDINT_LEFT,"px"),this.tooltipEl.style.top="".concat(t.clientY+a.TOOLTIP_PADDINT_TOP,"px")}}},{key:"drawChart",value:function(t,n,e){t.classList.add("dopyo-chart"),t.style.minWidth="".concat(this.size.width,"px"),n&&t.appendChild(n),t.appendChild(e)}}])&&s(n.prototype,e),i&&s(n,i),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,n){return!n||"object"!==l(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,n){return(y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var A=function(t){function n(t){var e=t.size,r=t.containerEl,a=t.data,i=t.options;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),d(this,p(n).call(this,{size:e,containerEl:r,data:a,options:i}))}var e,a,i;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&y(t,n)}(n,u),e=n,(a=[{key:"render",value:function(){this.drawXAxis([this.padding,this.size]),this.drawXAxisLabels([this.padding,this.size,this.data.xAxis]),this.drawYAxis([this.padding,this.size]),this.drawYAxisLabels([this.padding,this.size,this.data.series,this.unit,this.digit]),this.drawData([this.padding,this.size,this.data,this.unit,this.digit]),this.tooltipEl&&r.addEventToEl(this.svgEl,"mouseover",this.addTooltipEvent,this),this.drawChart(this.containerEl,this.tooltipEl,this.svgEl)}},{key:"drawData",value:function(t){var n=this,e=f(t,5),r=e[0],a=e[1],i=e[2],c=e[3],s=e[4],u=o.getArraysMax(o.getDataSet(i.series)),l=o.getArraysMin(o.getDataSet(i.series))<0?o.getArraysMin(o.getDataSet(i.series)):0,h=o.calculateYAxis(u,l,c,s),d=o.getYAxisHeight(a.height,r),p=o.calculateYAxisGap(u,l,c,s),y=d/c,A=h.findIndex(function(t){return 0===t}),g=o.calculateXAxisGap(o.getXAxisWidth(a.width,r),i.xAxis.length);i.series.forEach(function(t,n){t.calculatedData=t.data.map(function(t,n){return[Math.round(r+g*n),Math.round(d-t*y/p-Math.round(y*A))]})}),this.svgEl.innerHTML+=i.series.map(function(t,e){return'<g class="data">\n        '.concat(n.drawLine(t,e),"\n        ").concat(n.drawDots(i.xAxis,t,e),"\n      </g>\n      ")}).join("")}},{key:"drawDots",value:function(t,n,e){var r=this,a=n.calculatedData.map(function(a,i){return'<circle cx="'.concat(a[0],'" cy="').concat(a[1],'" r="8" stroke="').concat(r.colors[e],'" fill="#fff" data-color="').concat(r.colors[e],'" data-date="').concat(t[i],'" data-value="').concat(n.data[i],'" />')}).join("");return'<g class="dots">'.concat(a,"</g>")}},{key:"drawLine",value:function(t,n){var e=t.calculatedData.reduce(function(t,n,e,r){return Array.isArray(n)?(0===e?t+="M ":1===e&&(t+="L "),t+"".concat(n.join(",")," ")):void 0},"");return'<g class="line"><path fill="none" d="'.concat(e,'" stroke="').concat(this.colors[n],'" /></g>')}}])&&h(e.prototype,a),i&&h(e,i),n}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,n){return!n||"object"!==g(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,n){return(I=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var D=function(t){function n(t){var e=t.size,r=t.containerEl,a=t.data,i=t.options;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),v(this,T(n).call(this,{size:e,containerEl:r,data:a,options:i}))}var e,r,i;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&I(t,n)}(n,A),e=n,(r=[{key:"drawData",value:function(t){var n=this,e=_(t,5),r=e[0],a=e[1],i=e[2],c=e[3],s=e[4],u=o.getArraysMax(o.getDataSet(i.series)),l=o.getArraysMin(o.getDataSet(i.series))<0?o.getArraysMin(o.getDataSet(i.series)):0,f=o.calculateYAxis(u,l,c,s),h=o.getYAxisHeight(a.height,r),d=o.calculateYAxisGap(u,l,c,s),p=h/c,y=f.findIndex(function(t){return 0===t}),A=o.calculateXAxisGap(o.getXAxisWidth(a.width,r),i.xAxis.length);i.series.forEach(function(t,n){t.calculatedData=t.data.map(function(t,n){return[Math.round(r+A*n),Math.round(h-t*p/d-Math.round(p*y))]})}),this.svgEl.innerHTML+=i.series.map(function(t,e){return'<g class="data">\n        '.concat(n.drawArea(t,e),"\n        ").concat(n.drawLine(t,e),"\n        ").concat(n.drawDots(i.xAxis,t,e),"\n      </g>\n      ")}).join("")}},{key:"drawArea",value:function(t,n){var e=this.size,r=(e.width,e.height),i=this.padding,o=[].concat(E(t.calculatedData),[[t.calculatedData[t.calculatedData.length-1][0],r-i*a.DEFAULT_PADDING_MULTIPLE_TIMES],[i,r-i*a.DEFAULT_PADDING_MULTIPLE_TIMES]]).reduce(function(t,n,e,r){return Array.isArray(n)?(0===e?t+="M ":1===e&&(t+="L "),t+"".concat(n.join(",")," ")):void 0},"");return'<g class="area">\n      <path fill-opacity="0.5" fill="'.concat(this.colors[n],'" d="').concat(o,' Z" />\n    </g>')}}])&&x(e.prototype,r),i&&x(e,i),n}();e.d(n,"dopyo",function(){return b});var b={createChart:function(t){var n=t.type,e=t.size,i=t.containerEl,o=t.data,c=t.options;switch(r.findKey(a.CHART_TYPES,n)){case"LINE_CHART":this.drawLineChart({size:e,containerEl:i,data:o,options:c});break;case"BAR_CHART":case"PIE_CHART":break;case"AREA_CHART":this.drawAreaChart({size:e,containerEl:i,data:o,options:c})}},drawLineChart:function(t){var n=t.size,e=t.containerEl,r=t.data,a=t.options;new A({size:n,containerEl:e,data:r,options:a}).render()},drawAreaChart:function(t){var n=t.size,e=t.containerEl,r=t.data,a=t.options;new D({size:n,containerEl:e,data:r,options:a}).render()}}}])});